#include <hardware/gpio.h>
#include <pico/stdlib.h>
#include "target_interfaces/spi_prog/spi_prog.h"

// Blinky on PB7
const uint8_t program[] = {
    0x0C, 0x94, 0x3E, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00,
    0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x0C, 0x94, 0x48, 0x00, 0x11, 0x24, 0x1F, 0xBE,
    0xCF, 0xEF, 0xD0, 0xE1, 0xDE, 0xBF, 0xCD, 0xBF, 0x0E, 0x94, 0x4A, 0x00, 0x0C, 0x94, 0x60, 0x00,
    0x0C, 0x94, 0x00, 0x00, 0x27, 0x9A, 0x2F, 0x9A, 0x2F, 0xEF, 0x82, 0xE5, 0x97, 0xE0, 0x21, 0x50,
    0x80, 0x40, 0x90, 0x40, 0xE1, 0xF7, 0x00, 0xC0, 0x00, 0x00, 0x2F, 0x98, 0x2F, 0xEF, 0x82, 0xE5,
    0x97, 0xE0, 0x21, 0x50, 0x80, 0x40, 0x90, 0x40, 0xE1, 0xF7, 0x00, 0xC0, 0x00, 0x00, 0xEB, 0xCF,
    0xF8, 0x94, 0xFF, 0xCF};

int main() {
	TargetInterfaces::SPIProg spi_prog;
	spi_prog.start_programming();
	spi_prog.write_flash_program(program, sizeof(program));
	spi_prog.finish_programming();
	for (;;) {}
}
